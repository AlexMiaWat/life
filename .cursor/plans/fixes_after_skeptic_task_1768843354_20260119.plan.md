# –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ—Å–ª–µ –æ—Ç—á–µ—Ç–∞ –°–∫–µ–ø—Ç–∏–∫–∞ (task_1768843354)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-19
**–û—Å–Ω–æ–≤–∞–Ω –Ω–∞:** `docs/reviews/skeptic_task_1768842813_20260119.md`
**–°—Ç–∞—Ç—É—Å:** üî¥ –í –ü–†–û–¶–ï–°–°–ï

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

### 1. ‚ùå Memory –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ SelfState

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `SelfState` –ø–æ–ª–µ `memory` –∏–º–µ–µ—Ç —Ç–∏–ø `list[MemoryEntry]`, –Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Memory`.

**–†–µ—à–µ–Ω–∏–µ:**

- –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø `memory` –≤ `SelfState` –Ω–∞ `Memory`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `memory = Memory(archive=archive_memory)` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ SelfState
- –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `self_state.memory` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º `Memory`
- –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã `save_snapshot` –∏ `load_snapshot` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `Memory`

**–§–∞–π–ª—ã:**

- `src/state/self_state.py`

### 2. ‚ùå –ú–µ—Ç–æ–¥ `decay_weights()` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ `weight` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `MemoryEntry`, –Ω–æ –º–µ—Ç–æ–¥ `decay_weights()` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:**

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `decay_weights()` –≤ –∫–ª–∞—Å—Å–µ `Memory`
- –§–æ—Ä–º—É–ª–∞ –∑–∞—Ç—É—Ö–∞–Ω–∏—è: `weight *= decay_factor` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.99 –∑–∞ —Ç–∏–∫)
- –£—á–∏—Ç—ã–≤–∞—Ç—å –≤–æ–∑—Ä–∞—Å—Ç –∑–∞–ø–∏—Å–∏ –∏ –∑–Ω–∞—á–∏–º–æ—Å—Ç—å –ø—Ä–∏ –∑–∞—Ç—É—Ö–∞–Ω–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ –≤ runtime loop (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)

**–§–∞–π–ª—ã:**

- `src/memory/memory.py`
- `src/runtime/loop.py`

### 3. ‚ùå –í—ã–∑–æ–≤ `archive_old_entries()` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ runtime loop

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä `archive_interval = 50` –¥–æ–±–∞–≤–ª–µ–Ω, –Ω–æ –≤—ã–∑–æ–≤ `archive_old_entries()` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if self_state.ticks % archive_interval == 0:`
- –í—ã–∑–≤–∞—Ç—å `self_state.memory.archive_old_entries()` —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

**–§–∞–π–ª—ã:**

- `src/runtime/loop.py`

### 4. ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –¥–ª—è `archive_old_entries()`, `decay_weights()`, `ArchiveMemory` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

**–†–µ—à–µ–Ω–∏–µ:**

- –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `archive_old_entries()` —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
- –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `decay_weights()`
- –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `ArchiveMemory` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ –∞—Ä—Ö–∏–≤–∞

**–§–∞–π–ª—ã:**

- `src/test/test_memory.py`

## –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

### 5. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ `archive_old_entries()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∞—Ä—Ö–∏–≤–∞.

**–†–µ—à–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–∏—Ç—å try/except –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `save_archive()`
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –∞–∫—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏

**–§–∞–π–ª—ã:**

- `src/memory/memory.py`

### 6. ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–¥—É

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–µ—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:**

- –û–±–Ω–æ–≤–∏—Ç—å `docs/components/runtime-loop.md` - —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —à–∞–≥ "Archive" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –û–±–Ω–æ–≤–∏—Ç—å `docs/components/memory.md` - –æ–ø–∏—Å–∞—Ç—å `decay_weights()`
- –û–±–Ω–æ–≤–∏—Ç—å `docs/components/self-state.md` - —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ `memory` —è–≤–ª—è–µ—Ç—Å—è `Memory`

**–§–∞–π–ª—ã:**

- `docs/components/runtime-loop.md`
- `docs/components/memory.md`
- `docs/components/self-state.md`

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø `memory` –≤ SelfState –Ω–∞ `Memory` (fix_1)
2. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `decay_weights()` (fix_2)
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `archive_old_entries()` –≤ runtime loop (fix_3)
4. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ `decay_weights()` –≤ runtime loop (fix_4)
5. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (fix_5)
6. ‚è≥ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã (fix_6)
7. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (fix_7)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- ‚úÖ `self_state.memory` —è–≤–ª—è–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º `Memory`
- ‚úÖ –ú–µ—Ç–æ–¥ `decay_weights()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ runtime loop
- ‚úÖ –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –≤–µ—Å–æ–≤ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ runtime loop
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞