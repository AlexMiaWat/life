"""
Централизованный модуль констант системы Life.

Все константы системы должны быть определены здесь для обеспечения согласованности
и упрощения настройки параметров.
"""

# ============================================================================
# Константы валидации параметров
# ============================================================================

# Допуск для проверки изменений параметров (для учета погрешностей вычислений с плавающей точкой)
# Используется при сравнении delta с MAX_PARAMETER_DELTA и MAX_ADAPTATION_DELTA
# Обоснование: стандартный допуск для операций с плавающей точкой (IEEE 754)
VALIDATION_TOLERANCE = 0.001

# ============================================================================
# Константы Learning Engine
# ============================================================================

# Максимальное изменение параметра за один вызов Learning
# Обоснование: ограничение скорости изменения для обеспечения стабильности системы
MAX_PARAMETER_DELTA = 0.01

# Минимальное изменение для применения (чтобы избежать микро-изменений)
# Обоснование: фильтрация шума и незначительных колебаний
MIN_PARAMETER_DELTA = 0.001

# Пороги частоты для изменения чувствительности к типам событий
# Если частота события > HIGH_FREQUENCY_THRESHOLD, увеличиваем чувствительность
# Если частота события < LOW_FREQUENCY_THRESHOLD, уменьшаем чувствительность
# Обоснование: эмпирически выбранные пороги для баланса между адаптивностью и стабильностью
HIGH_FREQUENCY_THRESHOLD = 0.2  # 20% всех событий
LOW_FREQUENCY_THRESHOLD = 0.1  # 10% всех событий

# Пороги значимости для изменения порогов значимости
# Если средняя значимость > HIGH_SIGNIFICANCE_THRESHOLD, снижаем порог
# Если средняя значимость < LOW_SIGNIFICANCE_THRESHOLD, повышаем порог
# Обоснование: эмпирически выбранные пороги для баланса между чувствительностью и фильтрацией
HIGH_SIGNIFICANCE_THRESHOLD = 0.5  # 50% средней значимости
LOW_SIGNIFICANCE_THRESHOLD = 0.2  # 20% средней значимости

# Пороги частоты для изменения коэффициентов реакции
# Если паттерн используется > HIGH_PATTERN_FREQUENCY_THRESHOLD, увеличиваем коэффициент
# Если паттерн используется < LOW_PATTERN_FREQUENCY_THRESHOLD, уменьшаем коэффициент
# Обоснование: эмпирически выбранные пороги для баланса между адаптивностью и стабильностью
HIGH_PATTERN_FREQUENCY_THRESHOLD = 0.3  # 30% всех паттернов
LOW_PATTERN_FREQUENCY_THRESHOLD = 0.1  # 10% всех паттернов

# ============================================================================
# Константы Adaptation Manager
# ============================================================================

# Максимальное изменение параметра за один вызов Adaptation
# Обоснование: ограничение скорости изменения для обеспечения стабильности системы
MAX_ADAPTATION_DELTA = 0.01

# Минимальное изменение для применения (чтобы избежать микро-изменений)
# Обоснование: фильтрация шума и незначительных колебаний
MIN_ADAPTATION_DELTA = 0.001

# Максимальный размер истории адаптаций
# Обоснование: баланс между памятью о прошлых изменениях и ограничением использования памяти
MAX_ADAPTATION_HISTORY_SIZE = 50

# ============================================================================
# Константы Meaning Engine
# ============================================================================

# Коэффициент для линейной интерполяции модификаторов чувствительности
# Используется для преобразования sensitivity [0.0, 1.0] в модификатор [0.5, 1.0]
# Формула: modifier = SENSITIVITY_INTERPOLATION_BASE + sensitivity * SENSITIVITY_INTERPOLATION_RANGE
# Обоснование: обеспечивает минимальный модификатор 0.5 (половина исходной значимости)
# и максимальный модификатор 1.0 (исходная значимость)
SENSITIVITY_INTERPOLATION_BASE = 0.5
SENSITIVITY_INTERPOLATION_RANGE = 0.5

# Максимальный модификатор значимости для соблюдения принципа медленного изменения
# Ограничивает максимальное изменение значимости до 1.5x от исходной
# Обоснование: предотвращает резкие скачки значимости, обеспечивая плавные изменения
MAX_SIGNIFICANCE_MODIFIER = 1.5

# Порог низкой целостности для применения дополнительного модификатора значимости
# Применяется когда integrity < LOW_INTEGRITY_THRESHOLD
# Обоснование: эмпирически выбранный порог для определения критического состояния системы
LOW_INTEGRITY_THRESHOLD = 0.3

# Множитель значимости при низкой целостности
# Применяется когда integrity < LOW_INTEGRITY_THRESHOLD
# Обоснование: увеличение чувствительности к событиям при критическом состоянии системы
LOW_INTEGRITY_SIGNIFICANCE_MULTIPLIER = 1.5

# ============================================================================
# Константы Runtime Loop
# ============================================================================

# Константы для интервалов вызова компонентов (в тиках)
LEARNING_INTERVAL = 75  # Вызов Learning раз в 75 тиков (между 50-100)
ADAPTATION_INTERVAL = 100  # Вызов Adaptation раз в 100 тиков (реже чем Learning)
ARCHIVE_INTERVAL = 50  # Вызов архивации раз в 50 тиков
DECAY_INTERVAL = 10  # Вызов затухания весов раз в 10 тиков

# Константы для работы с памятью
MEMORY_DECAY_FACTOR = 0.99  # Фактор затухания весов памяти
MEMORY_MIN_WEIGHT = 0.1  # Минимальный вес для архивации
MEMORY_MAX_AGE_SECONDS = 7 * 24 * 3600  # Максимальный возраст записей (7 дней в секундах)
MEMORY_DECAY_MIN_WEIGHT = 0.0  # Минимальный вес при затухании (для полного забывания)

# Константы для логики слабости
WEAKNESS_THRESHOLD = 0.05  # Порог для определения слабости (energy, integrity, stability)
WEAKNESS_PENALTY_COEFFICIENT = 0.02  # Коэффициент штрафа за слабость (применяется к dt)
WEAKNESS_STABILITY_INTEGRITY_MULTIPLIER = 2.0  # Множитель штрафа для stability и integrity

# Константы для обработки ошибок
ERROR_INTEGRITY_PENALTY = 0.05  # Штраф integrity при ошибке в цикле
MAX_ERRORS_BEFORE_WARNING = 10  # Порог для предупреждения о частых ошибках

# Константы для модификации impact
IMPACT_REDUCTION_COEFFICIENT = 0.5  # Коэффициент для уменьшения impact при обработке событий
