# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é MCP —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ API

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ MCP (Model Context Protocol)?

MCP (Model Context Protocol) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è LLM —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —á–µ—Ä–µ–∑ JSON-RPC —Å–æ–æ–±—â–µ–Ω–∏—è.

MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **stdio –ø—Ä–æ—Ç–æ–∫–æ–ª** (stdin/stdout), –∞ –Ω–µ —á–µ—Ä–µ–∑ HTTP API. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å
- –û–±—â–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ stdin/stdout –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã –≤ stdin
- –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã –≤ stdout

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ API?

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç (test_mcp_client.py)

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç `test_mcp_client.py`, –∫–æ—Ç–æ—Ä—ã–π:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ subprocess
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ stdin
3. –ß–∏—Ç–∞–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ stdout
4. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–ø—É—Å–∫:**
```bash
python test_mcp_client.py
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Å—Å–∏–∏ (`initialize`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`tools/list`)
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `search_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_snapshots`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä –≤ Cursor Settings:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Settings (`Ctrl+,` –∏–ª–∏ `Cmd+,`)
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "MCP" –∏–ª–∏ "Model Context Protocol"
   - –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏–∑ `todo/mcp_config_example.json`

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ Cursor Chat:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Chat
   - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥–∏–∞–ª–æ–≥–µ —Å –∞–≥–µ–Ω—Ç–æ–º

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Cursor Chat:**
```
–ò—Å–ø–æ–ª—å–∑—É–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç search_docs –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ "memory"
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `search_docs(query, limit)` - –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ `docs/`
- `get_doc_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `docs/`
- `list_docs(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `docs/`

### TODO
- `search_todo(query, limit)` - –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ `todo/`
- `get_todo_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `todo/`
- `list_todo(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `todo/`

### –ö–æ–¥
- `search_code(query, limit)` - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞
- `get_code_file(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–æ–¥–∞
- `get_code_index()` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–æ –∫–æ–¥–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ
- `get_test_coverage()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
- `list_snapshots()` - –°–ø–∏—Å–æ–∫ snapshots
- `get_snapshot(filename)` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π snapshot

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "search_docs",
    "arguments": {
      "query": "test",
      "limit": 3
    }
  }
}
```

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞..."
      }
    ]
  }
}
```

### –ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `initialize` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `tools/list` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. **–í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `tools/call` —Å –∏–º–µ–Ω–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
4. **–û—Ç–≤–µ—Ç**: –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **MCP —Å–µ—Ä–≤–µ—Ä –ù–ï HTTP API** - –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ stdio, –Ω–µ —á–µ—Ä–µ–∑ HTTP
2. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `python mcp_index.py` –Ω–∞–ø—Ä—è–º—É—é** - –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç** (`test_mcp_client.py`) - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
4. **–†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MCP**: https://modelcontextprotocol.io/
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP**: `.cursor/MCP_SETUP.md`
- **–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `todo/mcp_config_example.json`
- **MCP —Å–µ—Ä–≤–µ—Ä**: `mcp_index.py`
