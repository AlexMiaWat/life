# Отчет: Обновление документации под последние доработки (MCP search_mode)

> **Дата:** 2026-01-20  
> **Контекст изменений:** в MCP сервере (`mcp_index.py`) добавлен параметр `search_mode` для `search_docs`/`search_todo` (AND/OR/PHRASE) и расширены тесты (`src/test/test_mcp_server.py`).  
> **Цель:** привести документацию в `docs/` в соответствие с актуальным поведением.

## Что обновлено в документации

### 1) Гайды по тестированию MCP

**Файл:** `docs/testing/MCP_TESTING_GUIDE.md`

- Обновлены сигнатуры инструментов:
  - `search_docs(query, search_mode="AND", limit=10)`
  - `search_todo(query, search_mode="AND", limit=10)`
- Добавлен раздел про режимы поиска `search_mode` (AND/OR/PHRASE) и нюанс поведения кавычек:
  - кавычки не “перебивают” явный `search_mode="AND"/"OR"`;
  - PHRASE применяется при `search_mode="PHRASE"` (или при отсутствии режима и запросе в кавычках).
- Обновлен JSON-RPC пример вызова `search_docs`: добавлен аргумент `search_mode`.

### 2) Исторический отчет тестирования через чат (с пометкой обновления API)

**Файл:** `docs/testing/MCP_API_TEST_REPORT.md`

- Добавлена примечание о том, что у `search_docs`/`search_todo` появился опциональный параметр `search_mode`, при сохранении обратной совместимости.

### 3) Результаты тестирования MCP сервера (с фиксацией нового API)

**Файл:** `docs/testing/MCP_TEST_RESULTS.md`

- Добавлены заметки об обновлении (2026-01-20): `search_docs`/`search_todo` поддерживают `search_mode` (AND/OR/PHRASE).

### 4) Плановая документация задачи “MCP Engine v2” (синхронизация текущего состояния)

**Файл:** `docs/planning/task_1_20260120_094041.md`

- В разделе “Текущее состояние” обновлено описание: режимы AND/OR/PHRASE уже доступны в `mcp_index.py`, но поиск всё ещё линейный (индекса/ранжирования нет).

## Дополнительно (косметические правки в docs)

- `docs/components/monitor.md`: нормализована формулировка про режим “только чтение”.
- `docs/development/agent-skeptic.md`, `docs/development/agents-overview.md`: унифицирована формулировка “только чтение”.

## Итог

Документация по MCP (особенно тестовые гайды и отчеты) приведена в соответствие с актуальным API и поведением `search_mode`.

Отчет завершен!
