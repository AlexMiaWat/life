# ADR 003: Выбор технологического стека

## Статус
✅ Принято

## Дата
2026-01-15

## Контекст
Необходимо выбрать технологии для реализации проекта Life, учитывая:
- Экспериментальный характер проекта
- Требования к производительности
- Простоту разработки и тестирования
- Поддержку асинхронного программирования
- Возможность быстрого прототипирования

## Решение
Принять следующий технологический стек:

### Основной язык: Python 3.10+
- **Обоснование**: богатая экосистема, простота разработки, отличная поддержка научных вычислений
- **Преимущества**: быстрая разработка, читаемый код, большое сообщество
- **Версия**: 3.10+ (минимальная), рекомендуется 3.11+ для лучшей производительности

### Веб-фреймворк: FastAPI
- **Обоснование**: высокая производительность, автоматическая генерация OpenAPI, встроенная валидация
- **Преимущества**: async/await, type hints, отличная документация
- **ASGI сервер**: Uvicorn для асинхронной обработки запросов

### Аутентификация: JWT токены
- **Библиотека**: python-jose[cryptography] для создания и валидации токенов
- **Хеширование паролей**: passlib[bcrypt] для безопасного хранения
- **OAuth2**: встроенная поддержка в FastAPI

### Тестирование: pytest
- **Обоснование**: гибкий, расширяемый, отличная поддержка fixtures
- **Покрытие**: pytest-cov для измерения покрытия кода
- **Property-based**: hypothesis для генерации тестовых данных

### Дополнительные инструменты
- **colorama**: цветной вывод в консоль
- **dataclasses**: для структур данных (SelfState, Event, etc.)
- **typing**: строгая типизация для надежности
- **pathlib**: современная работа с файловой системой
- **psutil**: системный мониторинг (CPU, память, процессы)

## Обоснование

### За Python
- **Простота**: низкий порог входа, читаемый синтаксис
- **Экосистема**: огромное количество библиотек
- **Производительность**: достаточная для экспериментальной системы
- **Академическая ценность**: широко используется в исследованиях

### За psutil
- **Мониторинг ресурсов**: получение информации о CPU, памяти, дисках
- **Кроссплатформенность**: работает на Windows, Linux, macOS
- **Надежность**: широко используется, хорошо протестирован
- **Простота**: интуитивный API для получения системных метрик

### За FastAPI
- **Современный**: использует последние возможности Python (type hints, async)
- **Быстрый**: высокая производительность благодаря Starlette
- **Документация**: автоматическая генерация интерактивной документации
- **Валидация**: встроенная проверка входных данных

### За pytest
- **Гибкость**: поддержка различных стилей тестирования
- **Fixtures**: мощная система подготовки тестовых данных
- **Плагины**: богатая экосистема расширений
- **Интеграция**: хорошо работает с FastAPI

## Последствия

### Положительные
- Быстрая разработка и прототипирование
- Высокая надежность благодаря строгой типизации
- Отличная тестируемость
- Хорошая производительность для целей проекта

### Отрицательные
- **GIL**: ограничения на многопоточность (не критично для данного проекта)
- **Память**: Python использует больше памяти чем компилируемые языки
- **Производительность**: может быть ниже чем у Rust/Go для высоконагруженных систем

### Риски
- **Версионные зависимости**: Python 3.10+ широко доступен, но рекомендуется 3.11+ для лучшей производительности
- **Экосистема**: зависимость от большого числа внешних пакетов
- **Производительность**: при росте нагрузки может потребоваться оптимизация

## Альтернативы

### Рассмотренные варианты
1. **Go + Gin**: высокая производительность, но сложнее разработка
2. **Node.js + Express**: JavaScript экосистема, но меньше академической ценности
3. **Rust + Actix**: максимальная производительность, но очень сложная разработка

### Почему отклонены
- Go: слишком сложно для быстрого прототипирования
- Node.js: меньше подходит для научных вычислений
- Rust: порог входа слишком высок для экспериментального проекта

## Связанные документы
- [requirements.txt](../../requirements.txt) — зависимости проекта
- [docs/testing/README.md](../testing/README.md) — документация по тестированию
