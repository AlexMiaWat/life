# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é MCP —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ API

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ MCP (Model Context Protocol)?

MCP (Model Context Protocol) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è LLM —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —á–µ—Ä–µ–∑ JSON-RPC —Å–æ–æ–±—â–µ–Ω–∏—è.

MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **stdio –ø—Ä–æ—Ç–æ–∫–æ–ª** (stdin/stdout), –∞ –Ω–µ —á–µ—Ä–µ–∑ HTTP API. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å
- –û–±—â–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ stdin/stdout –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã –≤ stdin
- –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã –≤ stdout

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ API?

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç (test_mcp_client.py)

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç `test_mcp_client.py`, –∫–æ—Ç–æ—Ä—ã–π:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ subprocess
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ stdin
3. –ß–∏—Ç–∞–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ stdout
4. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–ø—É—Å–∫:**
```bash
python test_mcp_client.py
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Å—Å–∏–∏ (`initialize`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`tools/list`)
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `search_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_snapshots`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä –≤ Cursor Settings:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Settings (`Ctrl+,` –∏–ª–∏ `Cmd+,`)
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "MCP" –∏–ª–∏ "Model Context Protocol"
   - –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏–∑ `todo/mcp_config_example.json`

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ Cursor Chat:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Chat
   - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥–∏–∞–ª–æ–≥–µ —Å –∞–≥–µ–Ω—Ç–æ–º

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Cursor Chat:**
```
–ò—Å–ø–æ–ª—å–∑—É–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç search_docs –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ "memory"
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `search_docs(query, search_mode="AND", limit=10)` - –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `docs/` (—Ä–µ–∂–∏–º—ã AND/OR/PHRASE)
- `get_doc_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `docs/`
- `list_docs(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `docs/`

### TODO
- `search_todo(query, search_mode="AND", limit=10)` - –ü–æ–∏—Å–∫ –ø–æ TODO –≤ `todo/` (—Ä–µ–∂–∏–º—ã AND/OR/PHRASE)
- `get_todo_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `todo/`
- `list_todo(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `todo/`

### –ö–æ–¥
- `search_code(query, limit)` - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞
- `get_code_file(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–æ–¥–∞
- `get_code_index()` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–æ –∫–æ–¥–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ
- `get_test_coverage()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
- `list_snapshots()` - –°–ø–∏—Å–æ–∫ snapshots
- `get_snapshot(filename)` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π snapshot

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–º
- `refresh_index()` - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ TODO —Ñ–∞–π–ª–æ–≤ (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)

#### –ö–æ–º–∞–Ω–¥–∞ `refresh_index()`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`docs/`, `todo/`). –ü–æ–ª–µ–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É—Å—Ç–∞—Ä–µ–ª.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
–°—Ç—Ä–æ–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```
–ò–Ω–¥–µ–∫—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω.

- –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 150
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ: 5234
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2.34 —Å–µ–∫.
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏:**
```
–ò–Ω–¥–µ–∫—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω.

- –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 0
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ: 0
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 0.12 —Å–µ–∫.

‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –Ω–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. –í–æ–∑–º–æ–∂–Ω–æ, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ docs/ –∏ todo/ –ø—É—Å—Ç—ã.
‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –∏–Ω–¥–µ–∫—Å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤. –í–æ–∑–º–æ–∂–Ω–æ, —Ñ–∞–π–ª—ã –ø—É—Å—Ç—ã –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç–∞.
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
```
–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–∂–æ–∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: Permission denied
–í—Ä–µ–º—è –¥–æ –æ—à–∏–±–∫–∏: 0.05 —Å–µ–∫.
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–ß–µ—Ä–µ–∑ Cursor Chat:**
   ```
   –ò—Å–ø–æ–ª—å–∑—É–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç refresh_index –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –ø–µ—Ä–µ–¥ –ø–æ–∏—Å–∫–æ–º
   ```

2. **–ß–µ—Ä–µ–∑ Python –∫–æ–¥:**
   ```python
   import asyncio
   from mcp_index import refresh_index
   
   result = asyncio.run(refresh_index())
   print(result)
   ```

3. **–ß–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç (JSON-RPC):**
   ```json
   {
     "jsonrpc": "2.0",
     "id": 1,
     "method": "tools/call",
     "params": {
       "name": "refresh_index",
       "arguments": {}
     }
   }
   ```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
–ö–æ–º–∞–Ω–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
- **RuntimeError**: –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–≤–∏–∂–∫–∞ –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- **ValueError**: –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **OSError**: –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- **–î—Ä—É–≥–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è**: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ `docs/` –∏ `todo/`
- –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∏–Ω–¥–µ–∫—Å –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π
- –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –≤—ã–¥–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ—à–∏–±–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `refresh_index()` –ø–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –ø–æ–∏—Å–∫–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –º–æ–≥ —É—Å—Ç–∞—Ä–µ—Ç—å
- –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –û–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤
- –ò–Ω–¥–µ–∫—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

## üîé –†–µ–∂–∏–º—ã –ø–æ–∏—Å–∫–∞ `search_mode` (AND/OR/PHRASE)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã `search_docs` –∏ `search_todo` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `search_mode`:

- **AND** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–≤—Å–µ** —Å–ª–æ–≤–∞ –∑–∞–ø—Ä–æ—Å–∞.
- **OR**: –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ** —Å–ª–æ–≤–æ –∑–∞–ø—Ä–æ—Å–∞.
- **PHRASE**: –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **—Ç–æ—á–Ω—É—é —Ñ—Ä–∞–∑—É** (case-insensitive).

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫:

- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤ –∫–∞–≤—ã—á–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä `"test query"`) –∏ `search_mode="PHRASE"` (–∏–ª–∏ `search_mode` –Ω–µ —É–∫–∞–∑–∞–Ω) ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ **—Ç–æ—á–Ω–æ–π —Ñ—Ä–∞–∑—ã**.
- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤ –∫–∞–≤—ã—á–∫–∞—Ö, –Ω–æ `search_mode="AND"` –∏–ª–∏ `search_mode="OR"` ‚Äî –∫–∞–≤—ã—á–∫–∏ **–Ω–µ –≤–∫–ª—é—á–∞—é—Ç PHRASE –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ**: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–≤—ã—á–µ–∫ —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –∏—â–µ—Ç—Å—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—É.

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "search_docs",
    "arguments": {
      "query": "test",
      "search_mode": "AND",
      "limit": 3
    }
  }
}
```

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞..."
      }
    ]
  }
}
```

### –ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `initialize` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `tools/list` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. **–í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `tools/call` —Å –∏–º–µ–Ω–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
4. **–û—Ç–≤–µ—Ç**: –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **MCP —Å–µ—Ä–≤–µ—Ä –ù–ï HTTP API** - –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ stdio, –Ω–µ —á–µ—Ä–µ–∑ HTTP
2. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `python mcp_index.py` –Ω–∞–ø—Ä—è–º—É—é** - –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç** (`test_mcp_client.py`) - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
4. **–†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞

MCP —Å–µ—Ä–≤–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

1. **`mcp_index.py`** - –æ—Å–Ω–æ–≤–Ω–æ–π MCP —Å–µ—Ä–≤–µ—Ä —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (FastMCP)
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (`search_docs`, `search_todo`, `get_doc_content`, –∏ —Ç.–¥.)
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å `IndexEngine` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞

2. **`mcp_index_engine.py`** - –º–æ–¥—É–ª—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ö–ª–∞—Å—Å `IndexEngine` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤
   - –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–æ–∫–µ–Ω–∞–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
   - –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
   - LRU eviction –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞
   - –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
   - **–£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –∑–∞ —Å—á–µ—Ç –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–º—è—Ç–∏ (LRU eviction)
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- üß© –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å: –ª–æ–≥–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- üîí –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üéØ –£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

## üéØ –£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (2026-01-20):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —É–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –¥–æ–∫—É–º–µ–Ω—Ç–∞.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (score), –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:

1. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (60% –≤–µ—Å–∞):
   - `core` (getting-started/, architecture/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 100
   - `system` (components/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 90
   - `meta` (development/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 80
   - `concepts` (concepts/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 60
   - `test` (testing/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 50
   - `archive` (archive/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20

2. **–°—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (40% –≤–µ—Å–∞):
   - ‚úÖ **Implemented**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 100
   - üß± **Documented**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 80
   - üîÆ **Future**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 40
   - ‚è∏ **Blocked**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 30
   - üö´ **Forbidden**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20

### –§–æ—Ä–º—É–ª–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

```
score = (category_priority * 0.6) + (status_priority * 0.4)
```

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–ø—Ä–æ—Å: "memory"**
- `components/memory.md` (‚úÖ Implemented, system) ‚Üí score ‚âà 94.0 (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- `concepts/memory-concept.md` (üîÆ Future, concepts) ‚Üí score ‚âà 52.0
- `archive/old-memory.md` (archive) ‚Üí score ‚âà 20.0 (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ó–∞–ø—Ä–æ—Å: "planning"**
- `components/planning.md` (‚úÖ Implemented, system) ‚Üí score ‚âà 94.0
- `concepts/planning.md` (üîÆ Future, concepts) ‚Üí score ‚âà 52.0

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ core –∏ system –∏–º–µ—é—Ç –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- ‚úÖ –ê—Ä—Ö–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- –°—Ç–∞—Ç—É—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `docs/development/status.md`
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–µ `score` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MCP**: https://modelcontextprotocol.io/
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP**: `.cursor/MCP_SETUP.md`
- **–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `todo/mcp_config_example.json`
- **MCP —Å–µ—Ä–≤–µ—Ä**: `mcp_index.py`
- **–ú–æ–¥—É–ª—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: `mcp_index_engine.py`
