# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é MCP —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ API

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ MCP (Model Context Protocol)?

MCP (Model Context Protocol) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è LLM —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —á–µ—Ä–µ–∑ JSON-RPC —Å–æ–æ–±—â–µ–Ω–∏—è.

MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **stdio –ø—Ä–æ—Ç–æ–∫–æ–ª** (stdin/stdout), –∞ –Ω–µ —á–µ—Ä–µ–∑ HTTP API. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å
- –û–±—â–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ stdin/stdout –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã –≤ stdin
- –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã –≤ stdout

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ API?

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç (test_mcp_client.py)

–°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç `test_mcp_client.py`, –∫–æ—Ç–æ—Ä—ã–π:
1. –ó–∞–ø—É—Å–∫–∞–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ subprocess
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ stdin
3. –ß–∏—Ç–∞–µ—Ç JSON-RPC –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ stdout
4. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–ø—É—Å–∫:**
```bash
python test_mcp_client.py
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP —Å–µ—Å—Å–∏–∏ (`initialize`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`tools/list`)
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `search_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_docs`
- ‚úÖ –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `list_snapshots`

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä –≤ Cursor Settings:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Settings (`Ctrl+,` –∏–ª–∏ `Cmd+,`)
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "MCP" –∏–ª–∏ "Model Context Protocol"
   - –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏–∑ `todo/mcp_config_example.json`

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ Cursor Chat:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Cursor Chat
   - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥–∏–∞–ª–æ–≥–µ —Å –∞–≥–µ–Ω—Ç–æ–º

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Cursor Chat:**
```
–ò—Å–ø–æ–ª—å–∑—É–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç search_docs –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ "memory"
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `search_docs(query, search_mode="AND", limit=10)` - –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `docs/` (—Ä–µ–∂–∏–º—ã AND/OR/PHRASE)
- `get_doc_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `docs/`
- `list_docs(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `docs/`

### TODO
- `search_todo(query, search_mode="AND", limit=10)` - –ü–æ–∏—Å–∫ –ø–æ TODO –≤ `todo/` (—Ä–µ–∂–∏–º—ã AND/OR/PHRASE)
- `get_todo_content(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ `todo/`
- `list_todo(recursive)` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `todo/`

### –ö–æ–¥
- `search_code(query, limit)` - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞
- `get_code_file(path)` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–æ–¥–∞
- `get_code_index()` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å –≤—Å–µ–≥–æ –∫–æ–¥–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ
- `get_test_coverage()` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏
- `list_snapshots()` - –°–ø–∏—Å–æ–∫ snapshots
- `get_snapshot(filename)` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π snapshot

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–º
- `refresh_index()` - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ TODO —Ñ–∞–π–ª–æ–≤ (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)

#### –ö–æ–º–∞–Ω–¥–∞ `refresh_index()`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (`docs/`, `todo/`). –ü–æ–ª–µ–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É—Å—Ç–∞—Ä–µ–ª.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
–°—Ç—Ä–æ–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```
–ò–Ω–¥–µ–∫—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω.

- –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 150
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ: 5234
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2.34 —Å–µ–∫.
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏:**
```
–ò–Ω–¥–µ–∫—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω.

- –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 0
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ: 0
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 0.12 —Å–µ–∫.

‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –Ω–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. –í–æ–∑–º–æ–∂–Ω–æ, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ docs/ –∏ todo/ –ø—É—Å—Ç—ã.
‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –∏–Ω–¥–µ–∫—Å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤. –í–æ–∑–º–æ–∂–Ω–æ, —Ñ–∞–π–ª—ã –ø—É—Å—Ç—ã –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç–∞.
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
```
–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–∂–æ–∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: Permission denied
–í—Ä–µ–º—è –¥–æ –æ—à–∏–±–∫–∏: 0.05 —Å–µ–∫.
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–ß–µ—Ä–µ–∑ Cursor Chat:**
   ```
   –ò—Å–ø–æ–ª—å–∑—É–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç refresh_index –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –ø–µ—Ä–µ–¥ –ø–æ–∏—Å–∫–æ–º
   ```

2. **–ß–µ—Ä–µ–∑ Python –∫–æ–¥:**
   ```python
   import asyncio
   from mcp_index import refresh_index
   
   result = asyncio.run(refresh_index())
   print(result)
   ```

3. **–ß–µ—Ä–µ–∑ MCP –∫–ª–∏–µ–Ω—Ç (JSON-RPC):**
   ```json
   {
     "jsonrpc": "2.0",
     "id": 1,
     "method": "tools/call",
     "params": {
       "name": "refresh_index",
       "arguments": {}
     }
   }
   ```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
–ö–æ–º–∞–Ω–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
- **RuntimeError**: –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–≤–∏–∂–∫–∞ –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- **ValueError**: –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–¥—Å—á–µ—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **OSError**: –û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- **–î—Ä—É–≥–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è**: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ `docs/` –∏ `todo/`
- –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –∏–Ω–¥–µ–∫—Å –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π
- –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –≤—ã–¥–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ—à–∏–±–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `refresh_index()` –ø–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –ø–æ–∏—Å–∫–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –º–æ–≥ —É—Å—Ç–∞—Ä–µ—Ç—å
- –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –û–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤
- –ò–Ω–¥–µ–∫—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

## üîé –†–µ–∂–∏–º—ã –ø–æ–∏—Å–∫–∞ `search_mode` (AND/OR/PHRASE)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã `search_docs` –∏ `search_todo` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `search_mode`:

- **AND** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **–≤—Å–µ** —Å–ª–æ–≤–∞ –∑–∞–ø—Ä–æ—Å–∞.
- **OR**: –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ** —Å–ª–æ–≤–æ –∑–∞–ø—Ä–æ—Å–∞.
- **PHRASE**: –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å **—Ç–æ—á–Ω—É—é —Ñ—Ä–∞–∑—É** (case-insensitive).

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫:

- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤ –∫–∞–≤—ã—á–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä `"test query"`) –∏ `search_mode="PHRASE"` (–∏–ª–∏ `search_mode` –Ω–µ —É–∫–∞–∑–∞–Ω) ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ **—Ç–æ—á–Ω–æ–π —Ñ—Ä–∞–∑—ã**.
- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤ –∫–∞–≤—ã—á–∫–∞—Ö, –Ω–æ `search_mode="AND"` –∏–ª–∏ `search_mode="OR"` ‚Äî –∫–∞–≤—ã—á–∫–∏ **–Ω–µ –≤–∫–ª—é—á–∞—é—Ç PHRASE –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ**: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–≤—ã—á–µ–∫ —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –∏—â–µ—Ç—Å—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—É.

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "search_docs",
    "arguments": {
      "query": "test",
      "search_mode": "AND",
      "limit": 3
    }
  }
}
```

### JSON-RPC —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞..."
      }
    ]
  }
}
```

### –ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `initialize` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**: –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `tools/list` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
3. **–í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞**: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `tools/call` —Å –∏–º–µ–Ω–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
4. **–û—Ç–≤–µ—Ç**: –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **MCP —Å–µ—Ä–≤–µ—Ä –ù–ï HTTP API** - –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ stdio, –Ω–µ —á–µ—Ä–µ–∑ HTTP
2. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `python mcp_index.py` –Ω–∞–ø—Ä—è–º—É—é** - –æ–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç** (`test_mcp_client.py`) - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
4. **–†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —á–µ—Ä–µ–∑ Cursor MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞

MCP —Å–µ—Ä–≤–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

1. **`mcp_index.py`** - –æ—Å–Ω–æ–≤–Ω–æ–π MCP —Å–µ—Ä–≤–µ—Ä —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (FastMCP)
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (`search_docs`, `search_todo`, `get_doc_content`, –∏ —Ç.–¥.)
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç JSON-RPC –∑–∞–ø—Ä–æ—Å—ã
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å `IndexEngine` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞

2. **`mcp_index_engine.py`** - –º–æ–¥—É–ª—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ö–ª–∞—Å—Å `IndexEngine` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤
   - –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–æ–∫–µ–Ω–∞–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
   - –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
   - LRU eviction –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞
   - –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
   - **–£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - **–¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

3. **`mcp_search_provider.py`** - –º–æ–¥—É–ª—å multi-provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è `SearchProvider` –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
   - `IndexSearchProvider` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
   - `LLMSearchProvider` - –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
   - `SearchManager` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –∑–∞ —Å—á–µ—Ç –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
- üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–º—è—Ç–∏ (LRU eviction)
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- üß© –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å: –ª–æ–≥–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- üîí –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üéØ –£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- üõ°Ô∏è **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ–∏—Å–∫–∞ –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö –∏–Ω–¥–µ–∫—Å–∞
- üîå **Multi-provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∏ –≥–∏–±–∫–æ—Å—Ç–∏

## üéØ –£–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (2026-01-20):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —É–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å—É –¥–æ–∫—É–º–µ–Ω—Ç–∞.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (score), –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:

1. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (60% –≤–µ—Å–∞):
   - `core` (getting-started/, architecture/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 100
   - `system` (components/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 90
   - `meta` (development/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 80
   - `concepts` (concepts/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 60
   - `test` (testing/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 50
   - `archive` (archive/): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20

2. **–°—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (40% –≤–µ—Å–∞):
   - ‚úÖ **Implemented**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 100
   - üß± **Documented**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 80
   - üîÆ **Future**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 40
   - ‚è∏ **Blocked**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 30
   - üö´ **Forbidden**: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20

### –§–æ—Ä–º—É–ª–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

```
score = (category_priority * 0.6) + (status_priority * 0.4)
```

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–ø—Ä–æ—Å: "memory"**
- `components/memory.md` (‚úÖ Implemented, system) ‚Üí score ‚âà 94.0 (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- `concepts/memory-concept.md` (üîÆ Future, concepts) ‚Üí score ‚âà 52.0
- `archive/old-memory.md` (archive) ‚Üí score ‚âà 20.0 (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

**–ó–∞–ø—Ä–æ—Å: "planning"**
- `components/planning.md` (‚úÖ Implemented, system) ‚Üí score ‚âà 94.0
- `concepts/planning.md` (üîÆ Future, concepts) ‚Üí score ‚âà 52.0

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ core –∏ system –∏–º–µ—é—Ç –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- ‚úÖ –ê—Ä—Ö–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- –°—Ç–∞—Ç—É—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `docs/development/status.md`
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–µ `score` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üõ°Ô∏è Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (2026-01-20):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Ç—Ä–µ–º—è —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ:

1. **–£—Ä–æ–≤–µ–Ω—å 1: –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å** (–æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥)
   - –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–æ–∏—Å–∫–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Ç–æ–∫–µ–Ω–æ–≤
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ

2. **–£—Ä–æ–≤–µ–Ω—å 2: –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫—ç—à—É**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –∫—ç—à —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤ –µ—Å—Ç—å
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º –≤ –∫—ç—à–µ
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ä–µ–∂–∏–º—ã –ø–æ–∏—Å–∫–∞ (AND/OR/PHRASE)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ –∏–Ω–¥–µ–∫—Å–∞

3. **–£—Ä–æ–≤–µ–Ω—å 3: Grep-–ø–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º** (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑–µ—Ä–≤)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –∏ –∏–Ω–¥–µ–∫—Å, –∏ –∫—ç—à –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   - –ü—Ä—è–º–æ–π –ø–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫—ç—à –∏ –∏–Ω–¥–µ–∫—Å –ø—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ–∏—Å–∫–∞ –¥–∞–∂–µ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–±–æ–µ —Å–∏—Å—Ç–µ–º—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```
–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ (_is_index_available)
    ‚Üì
[–î–æ—Å—Ç—É–ø–µ–Ω] ‚Üí –£—Ä–æ–≤–µ–Ω—å 1: –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å
    ‚Üì
[–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω] ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
    ‚Üì
[–ï—Å—Ç—å –∫—ç—à] ‚Üí –£—Ä–æ–≤–µ–Ω—å 2: –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫—ç—à—É
    ‚Üì
[–ù–µ—Ç –∫—ç—à–∞] ‚Üí –£—Ä–æ–≤–µ–Ω—å 3: Grep-–ø–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å fallback:
- `logger.info("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 2 (–ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫)")`
- `logger.info("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 3 (grep-–ø–æ–∏—Å–∫)")`

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é 1
- ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** –í—Å–µ —É—Ä–æ–≤–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º API –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏

#### –£—Ä–æ–≤–µ–Ω—å 1 ‚Üí –£—Ä–æ–≤–µ–Ω—å 2
**–£—Å–ª–æ–≤–∏–µ:** –ò–Ω–¥–µ–∫—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–∞:**
- `_initialized == False` - –∏–Ω–¥–µ–∫—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- `len(inverted_index) == 0` - –∏–Ω–¥–µ–∫—Å –ø—É—Å—Ç
- `len(content_cache) == 0` - –∫—ç—à –ø—É—Å—Ç
- `inverted_index == None` - –∏–Ω–¥–µ–∫—Å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å

#### –£—Ä–æ–≤–µ–Ω—å 2 ‚Üí –£—Ä–æ–≤–µ–Ω—å 3
**–£—Å–ª–æ–≤–∏–µ:** –ö—ç—à –ø—É—Å—Ç –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ª–∏–Ω–µ–π–Ω–æ–º –ø–æ–∏—Å–∫–µ

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—ç—à–∞:**
- `len(content_cache) == 0` - –∫—ç—à –ø—É—Å—Ç
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ª–∏–Ω–µ–π–Ω–æ–º –ø–æ–∏—Å–∫–µ

#### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 1
**–£—Å–ª–æ–≤–∏–µ:** –ò–Ω–¥–µ–∫—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –í—ã–∑–æ–≤ `engine.initialize()` –∏–ª–∏ `engine.reindex()`
- `_is_index_available()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü—Ä–∏–º–µ—Ä 1: –°–∏–º—É–ª—è—Ü–∏—è —Å–±–æ—è –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è fallback

```python
from mcp_index_engine import IndexEngine
from pathlib import Path

# –°–æ–∑–¥–∞–µ–º –¥–≤–∏–∂–æ–∫
engine = IndexEngine(docs_dir, todo_dir, src_dir)

# –û—á–∏—â–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Å–±–æ—è
engine.inverted_index.clear()
engine._initialized = False

# –ù–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫—ç—à
engine.content_cache["test.md"] = "test content"

# –ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 2 (–ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫)
results = engine.search_in_directory(
    docs_dir,
    "test",
    mode="AND",
    limit=10
)
# –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç: INFO: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 2 (–ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫)
```

#### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —É—Ä–æ–≤–Ω—è fallback

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è fallback —É—Ä–æ–≤–Ω–µ–π
logging.basicConfig(level=logging.INFO)

# –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback —É—Ä–æ–≤–Ω–µ–π 2 –∏–ª–∏ 3 –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:
# INFO: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 2 (–ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫)
# –∏–ª–∏
# INFO: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 3 (grep-–ø–æ–∏—Å–∫)

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å 1 (–∏–Ω–¥–µ–∫—Å), —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥–µ—Ç
```

#### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π fallback

```python
from mcp_index_engine import IndexEngine

# –£—Ä–æ–≤–µ–Ω—å 1: –ò–Ω–¥–µ–∫—Å –¥–æ—Å—Ç—É–ø–µ–Ω
engine = IndexEngine(docs_dir, todo_dir, src_dir)
engine.initialize()
results = engine.search_in_directory(docs_dir, "test")
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å (—É—Ä–æ–≤–µ–Ω—å 1)

# –£—Ä–æ–≤–µ–Ω—å 2: –ò–Ω–¥–µ–∫—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –µ—Å—Ç—å –∫—ç—à
engine.inverted_index.clear()
engine._initialized = False
results = engine.search_in_directory(docs_dir, "test")
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ (—É—Ä–æ–≤–µ–Ω—å 2)

# –£—Ä–æ–≤–µ–Ω—å 3: –ò–Ω–¥–µ–∫—Å –∏ –∫—ç—à –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
engine.content_cache.clear()
results = engine.search_in_directory(docs_dir, "test")
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è grep-–ø–æ–∏—Å–∫ (—É—Ä–æ–≤–µ–Ω—å 3)
```

#### –ü—Ä–∏–º–µ—Ä 4: –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ fallback —É—Ä–æ–≤–Ω–µ–π

```python
# –í –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

# –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É—Ä–æ–≤–Ω—è 2:
# INFO: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 2 (–ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫)
# WARNING: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å (—É—Ä–æ–≤–µ–Ω—å 1): ...

# –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É—Ä–æ–≤–Ω—è 3:
# INFO: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback —É—Ä–æ–≤–µ–Ω—å 3 (grep-–ø–æ–∏—Å–∫)
# WARNING: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å (—É—Ä–æ–≤–µ–Ω—å 1): ...
# WARNING: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ª–∏–Ω–µ–π–Ω–æ–º –ø–æ–∏—Å–∫–µ (—É—Ä–æ–≤–µ–Ω—å 2): ...

# –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É—Ä–æ–≤–Ω—è 1:
# (–Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- –ú–µ—Ç–æ–¥ `_is_index_available()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞
- –ú–µ—Ç–æ–¥ `_linear_search_in_cache()` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å 2
- –ú–µ—Ç–æ–¥ `_grep_search_in_files()` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å 3
- –í—Å–µ —É—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–µ–∂–∏–º—ã –ø–æ–∏—Å–∫–∞ AND/OR/PHRASE
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ score (—É–º–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π (`logger.warning()`)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ fallback –º–µ—Ç–æ–¥–∞—Ö

## üîå Multi-provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (2026-01-20):** –°–æ–∑–¥–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–æ–∏—Å–∫–∞.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **`SearchProvider`** - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–æ–∏—Å–∫–∞
   - –ú–µ—Ç–æ–¥—ã: `search()`, `is_available()`, `get_name()`

2. **`IndexSearchProvider`** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–∞
   - –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `IndexEngine`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–∑ `IndexEngine`

3. **`LLMSearchProvider`** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ LLM (–∑–∞–≥–ª—É—à–∫–∞)
   - –ì–æ—Ç–æ–≤ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ LLM-based –ø–æ–∏—Å–∫–∞
   - –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞)

4. **`SearchManager`** - –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏ fallback –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
   - –ü—Ä–æ–±—É–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ –ø–æ—Ä—è–¥–∫—É –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–∏—Å–∫–∞ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (LLM, –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫)
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (2026-01-20):** Multi-provider –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π MCP —Å–µ—Ä–≤–µ—Ä (`mcp_index.py`).

–§—É–Ω–∫—Ü–∏–∏ `search_docs` –∏ `search_todo` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `SearchManager` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏:

```python
# –í mcp_index.py
manager = _get_search_manager()
results = manager.search(
    DOCS_DIR,
    query,
    search_mode,
    limit,
    tokenize_query_func=_tokenize_query,
    search_and_func=_search_and,
    search_or_func=_search_or,
    search_phrase_func=_search_phrase,
    find_context_func=_find_context_lines,
)
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `IndexSearchProvider`, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å—é fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–∑ `IndexEngine`. –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä).

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MCP**: https://modelcontextprotocol.io/
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP**: `.cursor/MCP_SETUP.md`
- **–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `todo/mcp_config_example.json`
- **MCP —Å–µ—Ä–≤–µ—Ä**: `mcp_index.py`
- **–ú–æ–¥—É–ª—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: `mcp_index_engine.py`
- **Multi-provider –º–æ–¥—É–ª—å**: `mcp_search_provider.py`
