# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π Dev-Mode —Å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞

## –û–±–∑–æ—Ä

**Dev-mode v2.2** —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ hot reload —á–µ—Ä–µ–∑ `importlib.reload`, –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π hot reload –∏–º–µ–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–æ–≤
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã, –Ω–æ —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è
- –û–±—ä–µ–∫—Ç—ã —Ä–∞–∑–Ω—ã—Ö "–≤–µ—Ä—Å–∏–π" —Å–æ—Å—É—â–µ—Å—Ç–≤—É—é—Ç, –≤—ã–∑—ã–≤–∞—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—ä–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### 2. –í–∏—Å—è—á–∏–µ –ø–æ—Ç–æ–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä—ã
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø–æ—Ç–æ–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- API —Å–µ—Ä–≤–µ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ
- –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø–∞–º—è—Ç–∏

### 3. Race conditions
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø
**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞** –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö.

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. ProcessRestarter (`src/dev/process_restarter.py`)
–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º.

**–§—É–Ω–∫—Ü–∏–∏:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫—É–Ω–¥—É
- –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ graceful shutdown –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `os.execv()`

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
```
src/main_server_api.py
src/monitor/console.py
src/runtime/loop.py
src/state/self_state.py
src/environment/event.py
src/environment/event_queue.py
src/environment/generator.py
src/dev/process_restarter.py
```

#### 2. StateSerializer
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º.

**–§—É–Ω–∫—Ü–∏–∏:**
- `save_restart_state()`: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ JSON
- `load_restart_state()`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- `cleanup_restart_state()`: –£–¥–∞–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

**–§–æ—Ä–º–∞—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```json
{
  "restart_marker": true,
  "timestamp": 1705708800.0,
  "self_state": {...},
  "event_queue": [...],
  "config": {...}
}
```

#### 3. GracefulShutdownManager
–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

**–§—É–Ω–∫—Ü–∏–∏:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**
1. API —Å–µ—Ä–≤–µ—Ä (`server.shutdown()`)
2. Runtime loop (`loop_stop.set()`)
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ `restart_state.json`
4. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ (–º–∞–∫—Å. 10 —Å–µ–∫)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ mtime —Ñ–∞–π–ª–æ–≤ –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

2. **–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ shutdown**
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ graceful_shutdown
   - –í—ã–∑–æ–≤ `shutdown_manager.initiate_shutdown()`

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   - –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `data/restart_state.json`
   - –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞**
   ```python
   restart_args = [sys.executable] + sys.argv + ['--restart']
   os.execv(sys.executable, restart_args)
   ```

5. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ `--restart`
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ `restart_state.json`
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å —Å–æ—Å—Ç–æ—è–Ω–∏—è

–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏:

```python
# –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å
temp_file = f"{RESTART_STATE_FILE}.tmp"
with open(temp_file, 'w', encoding='utf-8') as f:
    json.dump(state_data, f, ensure_ascii=False, indent=2)
os.rename(temp_file, RESTART_STATE_FILE)
```

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

```python
def is_restart() -> bool:
    return '--restart' in sys.argv
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main_server_api.py

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ

**–£–¥–∞–ª–µ–Ω–æ:**
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ `reloader_thread()` —Å `importlib.reload`
- –ü—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ hot reload

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ò–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: `from src.dev.process_restarter import get_process_restarter, is_restart, load_restart_state_if_available`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ProcessRestarter –≤ dev-—Ä–µ–∂–∏–º–µ
- –õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

### –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ dev-—Ä–µ–∂–∏–º–µ

```python
if args.dev:
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ProcessRestarter
    process_restarter = get_process_restarter()

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è graceful shutdown
    process_restarter.register_component("API Server", server.shutdown, server_thread.join, 5.0)
    process_restarter.register_component("Runtime Loop", lambda: loop_stop.set(), runtime_thread.join, 5.0)

    # –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    process_restarter.start()
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### 2. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ—Ç –≤–∏—Å—è—á–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (2-3 —Å–µ–∫—É–Ω–¥—ã)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –û—Ç–ª–∞–¥–∫–∞ –±–µ–∑ side effects –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- ‚úÖ –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ production
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –†–∏—Å–∫–∏ –∏ mitigation

### –†–∏—Å–∫: –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤
**Mitigation:** –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã (10 —Å–µ–∫), fallback –Ω–∞ force kill

### –†–∏—Å–∫: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ
**Mitigation:** –î–≤–æ–π–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, checksum –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –†–∏—Å–∫: Race conditions –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
**Mitigation:** Threading.Lock –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
- ‚úÖ Graceful shutdown –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å —Ñ–ª–∞–≥–æ–º

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Dev-—Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ hot reload –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è/–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∫–ª—é—á–µ–Ω–∏–µ dev-mode

```bash
python src/main_server_api.py --dev --tick-interval 1.0 --snapshot-period 10
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ª–æ–≥–∞—Ö –ø–æ—è–≤—è—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
INFO: Process restarter started
INFO: Watching src/main_server_api.py
INFO: File changed: src/runtime/loop.py
INFO: Changes detected, initiating restart...
INFO: Graceful shutdown completed successfully
INFO: Restarting process...
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ graceful shutdown
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `data/restart_state.json`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

–°–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (docs/results/current_plan_task_1768939537.md):

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main_server_api.py ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω
- ‚úÖ –ó–∞–º–µ–Ω–∞ `reloader_thread()` –Ω–∞ `process_restarter_thread()`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞ importlib.reload
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è graceful shutdown
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ (–¢–µ–∫—É—â–∏–π)
- üîÑ –°–æ–∑–¥–∞–Ω–∏–µ unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ dev-mode
- üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –±–æ–ª—å—à–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### –≠—Ç–∞–ø 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ cleanup
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HOT_RELOAD_PROBLEMS.md
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README.md (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –Ω–æ–≤–æ–º—É dev-mode (—Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª)
- üîÑ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ –∏–∑ todo/DEBT.md

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π dev-mode —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ hot reload, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –Ω–∞–¥–µ–∂–Ω—É—é –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
