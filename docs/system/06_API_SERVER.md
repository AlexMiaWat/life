# 06_API_SERVER.md — API Сервер

## Назначение
API Server предоставляет HTTP интерфейс для управления системой Life и получения её состояния из внешних приложений.

## Текущий статус
✅ **Реализован** (v1.0)
*   Файл: [`src/main_server_api.py`](../../src/main_server_api.py)
*   Фреймворк: FastAPI.
*   Запускается в отдельном потоке (Daemon), параллельно с Runtime Loop.

## Endpoints

### GET /status
Возвращает текущее состояние Life (Self-State).

**Ответ:**
```json
{
  "alive": true,
  "ticks": 150,
  "age": 75.0,
  "energy": 95.5,
  "integrity": 1.0,
  "stability": 0.98
}
```

### GET /clear-data
Очищает все накопленные данные (логи, снапшоты).
Полезно для сброса "памяти" между экспериментами без перезапуска сервера.

### POST /event (Планируется)
Позволит отправлять события в Environment через HTTP.

## Запуск

Сервер запускается вместе с основным приложением:

```bash
python src/main_server_api.py --tick-interval 0.5
```

*   Порт по умолчанию: `8000`
*   Документация API (Swagger): `http://localhost:8000/docs`

## Архитектура

Сервер работает в режиме "Sidecar" для Runtime Loop:
1.  Loop обновляет `Self-State` (словарь).
2.  API читает этот же словарь (по ссылке) и отдает клиенту.
3.  Благодаря GIL в Python, чтение атомарных значений безопасно, но для сложных структур может потребоваться блокировка (пока не реализована).
