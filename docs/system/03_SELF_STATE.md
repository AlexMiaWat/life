# 03_SELF_STATE.md — Внутреннее состояние

## Назначение
Self-State — это "тело" системы. Это структура данных, которая хранит все физические и ментальные параметры Life.
Состояние первично: оно существует даже тогда, когда ничего не происходит.

## Текущий статус
✅ **Реализован** (v1.0)
*   Файл: [`src/state/self_state.py`](../../src/state/self_state.py)
*   Реализованы базовые параметры (Vital Parameters).

## Структура состояния

Состояние представляет собой dataclass `SelfState`, который содержит следующие группы параметров:

### 1. Identity (Идентичность)
Неизменяемые параметры, определяющие уникальность жизни.
*   `life_id` (str): Уникальный UUID.
*   `birth_timestamp` (float): Время рождения (Unix timestamp).

### 2. Temporal (Время)
Параметры, отражающие течение времени.
*   `age` (float): Возраст в секундах.
*   `ticks` (int): Количество прожитых тактов.

### 3. Vital Parameters (Жизненные показатели)
Динамические параметры, определяющие здоровье системы. Диапазон: [0.0, 1.0] или [0.0, 100.0].

| Параметр | Диапазон | Описание | Влияние |
|----------|----------|----------|---------|
| `energy` | 0-100 | Энергия. Тратится на действия и существование. | При 0 только слабость и бессилие. |
| `integrity` | 0-1 | Целостность. Структурная прочность. | Падает от шоков и ошибок. |
| `stability` | 0-1 | Стабильность. Устойчивость к шуму. | Влияет на точность восприятия. |

### 4. Internal Dynamics (Внутренняя динамика)
Накопленные эффекты.
*   `fatigue` (float): Усталость. Растет со временем, снижается при отдыхе.
*   `tension` (float): Напряжение. Растет от стресса.

### 5. Cognitive Layers (Когнитивные слои)
Параметры для хранения результатов обработки.
*   `memory` (list[MemoryEntry]): Эпизодическая память значимых событий.
*   `intelligence` (dict): Результаты обработки информации.
*   `planning` (dict): Потенциальные последовательности событий.

### 6. Event Processing (Обработка событий)
Временные данные для текущего цикла.
*   `recent_events` (list): Список типов последних событий.
*   `last_significance` (float): Значимость последнего обработанного события.
*   `energy_history` (list): История значений энергии.
*   `stability_history` (list): История значений стабильности.

### 7. Control (Управление)
*   `active` (bool): Флаг активности жизни.

## Инварианты

1.  **Необратимость:** `life_id` и `birth_timestamp` никогда не меняются.
2.  **Границы:** Vital параметры жестко ограничены своими диапазонами.
3.  **Бессмертие:** Если любой Vital параметр падает <= 0, флаг `active` становится `False`. Система не останавливается, а начинает болеть и хандрить. Смерти нет, только слабость и бессилие.

## API

```python
from state.self_state import create_initial_state, save_snapshot

# Создание нового состояния
state = create_initial_state()

# Доступ к параметрам
print(state['energy'])

# Сохранение на диск
save_snapshot(state)
```
